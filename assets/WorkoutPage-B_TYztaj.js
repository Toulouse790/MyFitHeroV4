import{d as Y,e as ae,r as n,f as P,u as pe,j as e,R as fe}from"./index-CjnEZlsY.js";import{u as ie}from"./use-toast-1UJezmcI.js";import{u as ge}from"./QueryClientProvider-ZBf36FVV.js";import{B as y,C as D,a as J,b as Q,c as I,d as je}from"./badge-0XDKnG36.js";import{I as Z}from"./input-BbNGe5Ek.js";import{C as ve,a as Ne,b as be}from"./collapsible-Ch9BGInH.js";import{P as q,D as ye,a as we,b as Ce,c as ke}from"./dialog-W3FGrw5O.js";import{D as K}from"./dumbbell-CXPzqEam.js";import{P as re}from"./play-DXK2oa_h.js";import{T as Ee}from"./target-Di6UzvH3.js";import{C as W}from"./circle-check-big-B5HpQEAC.js";import{C as Te,a as _e}from"./chevron-up-FALq0kkK.js";import{M as L}from"./minus-B_EWRt-2.js";import{S as G}from"./save-T82v-oun.js";import{T as Se}from"./trending-up-Cmv-0pKX.js";import{T as ze}from"./trophy-CS6fcHcf.js";import{Z as Me}from"./zap-BxpV5bJv.js";import{C as De}from"./clock-Dl80stQh.js";import{I as Ie}from"./info-Cl4o18K4.js";import"./index-GGMoTRFm.js";import"./clsx-B-dksMZM.js";import"./index-DdwsCUG1.js";import"./index-QD0cdno-.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],We=Y("pause",qe);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],X=Y("pen-line",Le);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Re=Y("square",Pe),Oe=()=>{const{toast:s}=ie(),N=ge(),{appStoreUser:i}=ae(),[l,h]=n.useState(()=>E()),[C,o]=n.useState(()=>{var r;return((r=E())==null?void 0:r.status)==="active"||!1}),g=r=>{r?localStorage.setItem("currentWorkoutSession",JSON.stringify(r)):localStorage.removeItem("currentWorkoutSession")};function E(){try{const r=localStorage.getItem("currentWorkoutSession");return r?JSON.parse(r):null}catch{return console.error("Erreur parsing session localStorage:",error),localStorage.removeItem("currentWorkoutSession"),null}}const w=n.useCallback(r=>{const d=(i==null?void 0:i.weight_kg)||70;return Math.round(d*6*r/60)},[i==null?void 0:i.weight_kg]),p=async r=>{try{const d={id:r.id,user_id:r.user_id,name:r.name,workout_type:r.workout_type,difficulty:r.difficulty,started_at:r.startTime,completed_at:r.endTime,duration_minutes:Math.floor(r.duration/60),calories_burned:r.caloriesBurned,exercises:r.exercises,notes:r.notes,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:c}=await P.from("workouts").upsert(d);if(c)throw c;N.invalidateQueries({queryKey:["workouts",r.user_id]})}catch(d){console.error("Supabase persistence error:",d)}},m=n.useCallback(r=>{if(!l)return;const d={...l,...r};h(d),g(d),p(d)},[l]),v=n.useCallback(async(r,{targetDuration:d=30,workout_type:c="strength",difficulty:u="intermediate",exercises:z=[]}={})=>{if(!(i!=null&&i.id)){s({title:"Erreur",description:"Utilisateur non connectÃ©",variant:"destructive"});return}const M={id:crypto.randomUUID(),user_id:i.id,name:r,startTime:new Date().toISOString(),duration:0,targetDuration:d,status:"active",caloriesBurned:0,workout_type:c,difficulty:u,exercises:z};h(M),o(!0),g(M),await p(M),s({title:"Session dÃ©marrÃ©e",description:`Â« ${r} Â» en cours`}),typeof window<"u"&&window.gtag&&window.gtag("event","workout_started",{workout_name:r,workout_type:c,user_id:i.id})},[i==null?void 0:i.id,s,p]),b=n.useCallback(async()=>{if(!l)return;const r={...l,status:"paused"};h(r),o(!1),g(r),await p(r),s({title:"Session en pause",description:"Reprenez quand vous Ãªtes prÃªt"})},[l,p,s]),a=n.useCallback(async()=>{if(!l)return;const r={...l,status:"active"};h(r),o(!0),g(r),await p(r),s({title:"Session reprise",description:"Bon entraÃ®nement !"})},[l,p,s]),S=n.useCallback(async()=>{if(!l||!(i!=null&&i.id))return;const r=new Date,d=Math.floor((r.getTime()-new Date(l.startTime).getTime())/1e3),c={...l,endTime:r.toISOString(),duration:d,caloriesBurned:w(d/60),status:"completed"};h(c),o(!1),g(null),await p(c);try{const u=new Date().toISOString().split("T")[0];await P.from("daily_stats").upsert({user_id:i.id,stat_date:u,workouts_completed:1,total_workout_minutes:Math.floor(d/60),calories_burned:c.caloriesBurned},{onConflict:"user_id,stat_date"})}catch{console.error("Erreur mise Ã  jour stats quotidiennes:",error)}s({title:"Session terminÃ©e ! ðŸŽ‰",description:`${Math.round(d/60)} min â€¢ ${c.caloriesBurned} kcal`}),typeof window<"u"&&window.gtag&&window.gtag("event","workout_completed",{duration_minutes:Math.round(d/60),calories_burned:c.caloriesBurned,workout_type:c.workout_type,user_id:i.id})},[l,w,s,i==null?void 0:i.id,p]),T=n.useCallback(async()=>{if(!l)return;const r={...l,status:"cancelled"};h(r),o(!1),g(null),await p(r),s({title:"Session annulÃ©e",variant:"destructive"})},[l,s,p]);return n.useEffect(()=>{(async()=>{if(i!=null&&i.id&&!l)try{const{data:d,error:c}=await P.from("workouts").select("*").eq("user_id",i.id).is("completed_at",null).order("started_at",{ascending:!1}).limit(1);if(!c&&d&&d.length>0){const u=d[0],z={id:u.id,user_id:u.user_id,name:u.name,startTime:u.started_at,endTime:u.completed_at,duration:(u.duration_minutes||0)*60,targetDuration:30,status:u.completed_at?"completed":"active",caloriesBurned:u.calories_burned||0,workout_type:u.workout_type||"strength",difficulty:u.difficulty||"intermediate",exercises:u.exercises||[],notes:u.notes};h(z),o(z.status==="active"),g(z)}}catch{console.error("Erreur rÃ©cupÃ©ration session interrompue:",error)}})()},[i==null?void 0:i.id,l]),{currentSession:l,isSessionActive:C,startSession:v,pauseSession:b,resumeSession:a,completeSession:S,cancelSession:T,calculateCalories:w,updateSession:m}},Be=s=>{const[N,i]=n.useState(0),[l,h]=n.useState(0),[C,o]=n.useState(0),[g,E]=n.useState(!1),[w,p]=n.useState(!1),m=n.useRef(null),v=n.useRef(null);n.useEffect(()=>(s&&!w?m.current=setInterval(()=>{i(c=>c+1),g?o(c=>Math.max(0,c-1)):h(c=>c+1)},1e3):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&clearInterval(m.current)}),[s,w,g]);const b=n.useCallback(()=>{E(!1),h(0),v.current&&(clearTimeout(v.current),v.current=null)},[]),a=n.useCallback(c=>{E(!0),o(c),v.current=setTimeout(()=>{E(!1),o(0)},c*1e3)},[]),S=n.useCallback(()=>{p(!0)},[]),T=n.useCallback(()=>{p(!1)},[]),r=n.useCallback(()=>{i(0),h(0),o(0),E(!1),p(!1),m.current&&(clearInterval(m.current),m.current=null),v.current&&(clearTimeout(v.current),v.current=null)},[]),d=n.useCallback(c=>{const u=Math.floor(c/3600),z=Math.floor(c%3600/60),M=c%60;return u>0?`${u}:${z.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`:`${z}:${M.toString().padStart(2,"0")}`},[]);return{totalTime:N,exerciseTime:l,restTime:C,isResting:g,startExerciseTimer:b,startRestTimer:a,pauseTimer:S,resumeTimer:T,resetTimer:r,formatTime:d}},Fe=(s,N,i)=>{const{toast:l}=ie(),h=n.useCallback(async w=>{if(!s)return;const p={...w,id:crypto.randomUUID()};N({exercises:[...s.exercises,p]})},[s,N]),C=n.useCallback(async(w,p,m)=>{if(!s)return;const v=s.exercises.map(b=>{if(b.id!==w)return b;const a=b.sets.map((T,r)=>{if(r!==p)return T;const d={...m};return m.completed&&!T.completed&&(d.timestamp=new Date().toISOString()),{...T,...d}}),S=a.every(T=>T.completed);return{...b,sets:a,completed:S}});if(N({exercises:v}),m.weight&&m.weight>0){const b=s.exercises.find(a=>a.id===w);b&&i(b.name,m.weight)}},[s,N,i]),o=n.useCallback(async w=>{if(!s)return;const p=s.exercises.map(m=>m.id===w?{...m,completed:!0,sets:m.sets.map(v=>({...v,completed:!0,timestamp:new Date().toISOString()}))}:m);N({exercises:p}),l({title:"Exercice terminÃ©",description:"Bravo ! Toutes les sÃ©ries sont complÃ©tÃ©es"})},[s,N,l]),g=n.useCallback(async(w,p)=>{if(!s)return;const m={reps:0,weight:0,completed:!1,...p},v=s.exercises.map(b=>b.id===w?{...b,sets:[...b.sets,m]}:b);N({exercises:v}),l({title:"SÃ©rie ajoutÃ©e",description:"Nouvelle sÃ©rie ajoutÃ©e Ã  l'exercice"})},[s,N,l]),E=n.useCallback(async(w,p)=>{if(!s)return;const m=s.exercises.map(v=>v.id===w?{...v,sets:v.sets.filter((b,a)=>a!==p),completed:!1}:v);N({exercises:m}),l({title:"SÃ©rie supprimÃ©e",description:"La sÃ©rie a Ã©tÃ© retirÃ©e de l'exercice"})},[s,N,l]);return{addExercise:h,updateExerciseSet:C,completeExercise:o,addSetToExercise:g,removeSetFromExercise:E}},$e=()=>{const{appStoreUser:s}=ae(),N=n.useCallback(h=>{try{const o=JSON.parse(localStorage.getItem("exerciseWeightHistory")||"{}")[h];if(!(o!=null&&o.length))return null;const g=o.filter(E=>E.userId===(s==null?void 0:s.id));return g.length?g[g.length-1].weight:null}catch{return console.error("Erreur lecture historique poids:",error),null}},[s==null?void 0:s.id]),i=n.useCallback((h,C)=>{if(!(!(s!=null&&s.id)||C<=0))try{const o=JSON.parse(localStorage.getItem("exerciseWeightHistory")||"{}");o[h]||(o[h]=[]),o[h].push({weight:C,date:new Date().toISOString(),userId:s.id}),o[h].length>50&&(o[h]=o[h].slice(-50)),localStorage.setItem("exerciseWeightHistory",JSON.stringify(o))}catch{console.error("Erreur sauvegarde historique poids:",error)}},[s==null?void 0:s.id]),l=n.useCallback(async h=>{if(!(s!=null&&s.id))return[];try{const{data:C,error:o}=await P.from("workouts").select("exercises").eq("user_id",s.id).eq("name",h).not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(1);return o||!(C!=null&&C.length)?(console.log("Aucune session prÃ©cÃ©dente trouvÃ©e pour:",h),[]):C[0].exercises.map(g=>({...g,id:crypto.randomUUID(),completed:!1,sets:g.sets.map(E=>({...E,completed:!1,timestamp:void 0}))}))}catch{return console.error("Erreur chargement derniÃ¨re session:",error),[]}},[s==null?void 0:s.id]);return{getLastWeightForExercise:N,saveWeightHistory:i,loadExercisesFromLastSession:l}},Ae=()=>{const s=Oe(),N=Be(s),i=$e(),l=Fe(s.currentSession,s.updateSession,i.saveWeightHistory);return{currentSession:s.currentSession,isSessionActive:s.isSessionActive,startSession:s.startSession,pauseSession:s.pauseSession,resumeSession:s.resumeSession,completeSession:s.completeSession,cancelSession:s.cancelSession,addExercise:l.addExercise,updateExerciseSet:l.updateExerciseSet,completeExercise:l.completeExercise,addSetToExercise:l.addSetToExercise,removeSetFromExercise:l.removeSetFromExercise,loadExercisesFromLastSession:i.loadExercisesFromLastSession,getLastWeightForExercise:i.getLastWeightForExercise,calculateCalories:s.calculateCalories,formatTime:N.formatTime}},fs=()=>{const{currentSession:s,isSessionActive:N,startSession:i,pauseSession:l,resumeSession:h,completeSession:C,cancelSession:o,updateExerciseSet:g,completeExercise:E,addSetToExercise:w,removeSetFromExercise:p,loadExercisesFromLastSession:m,calculateCalories:v,formatTime:b}=Ae();pe();const[a,S]=n.useState(null),[T,r]=n.useState(0),[d,c]=n.useState(null),[u,z]=n.useState(!1),[M,R]=n.useState(!1),[He,Ve]=n.useState(null),[ne,Je]=n.useState(!1),O=[{id:"ex-1",name:"DÃ©veloppÃ© CouchÃ©",category:"strength",muscle_groups:["chest","shoulders","triceps"],sets:[{reps:10,weight:60,completed:!1},{reps:8,weight:65,completed:!1},{reps:6,weight:70,completed:!1}],completed:!1,restTime:120},{id:"ex-2",name:"Squats",category:"strength",muscle_groups:["quads","glutes","hamstrings"],sets:[{reps:12,weight:80,completed:!1},{reps:10,weight:85,completed:!1},{reps:8,weight:90,completed:!1}],completed:!1,restTime:90},{id:"ex-3",name:"Tractions",category:"strength",muscle_groups:["back","biceps"],sets:[{reps:8,completed:!1},{reps:6,completed:!1},{reps:5,completed:!1}],completed:!1,restTime:90}],le=[{icon:Me,text:"Concentrez-vous sur la forme plutÃ´t que sur le poids",priority:"high"},{icon:De,text:"Respectez vos temps de repos pour optimiser la rÃ©cupÃ©ration",priority:"medium"},{icon:Ie,text:"Chaque sÃ©rie compte, mÃªme si elle semble facile",priority:"high"}],ce=()=>{const t=le.filter(f=>f.priority==="high");return t[Math.floor(Math.random()*t.length)]},oe=async()=>{const t="EntraÃ®nement Force",f=await m(t);await i(t,{workout_type:"strength",difficulty:"intermediate",exercises:f.length>0?f:O}),f.length>0?c(f[0].id):O.length>0&&c(O[0].name)},B=(t,f,k)=>{const x=s==null?void 0:s.exercises.find(_=>_.id===t),j=x==null?void 0:x.sets[f];j&&S({exerciseId:t,setIndex:f,field:k,value:(j[k]||0).toString()})},F=()=>{if(a){const t=parseFloat(a.value)||0;g(a.exerciseId,a.setIndex,{[a.field]:t}),S(null)}},de=(t,f)=>{g(t,f,{completed:!0})},me=(t,f)=>{g(t,f,{completed:!0})},ue=t=>{E(t);const f=s==null?void 0:s.exercises.find(k=>!k.completed&&k.id!==t);f&&c(f.id)},xe=()=>{C(),R(!0)},$=(t,f,k)=>{const x=s==null?void 0:s.exercises.find(_=>_.id===t),j=x==null?void 0:x.sets[f];if(j){const _=j[k]||0,te=k==="weight"?2.5:1;g(t,f,{[k]:_+te})}},A=(t,f,k)=>{const x=s==null?void 0:s.exercises.find(_=>_.id===t),j=x==null?void 0:x.sets[f];if(j){const _=j[k]||0,he=Math.max(0,_-(k==="weight"?2.5:1));g(t,f,{[k]:he})}};n.useEffect(()=>{let t;return N&&(s==null?void 0:s.status)==="active"&&(t=setInterval(()=>{r(f=>f+1)},1e3)),()=>clearInterval(t)},[N,s==null?void 0:s.status]);const H=(s==null?void 0:s.exercises.filter(t=>t.completed).length)||0,U=(s==null?void 0:s.exercises.length)||0,V=U>0?H/U*100:0,ee=v?v(T):Math.round(T*.15),se=ce();return ne?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center",children:e.jsx(K,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:(s==null?void 0:s.name)||"EntraÃ®nement"}),e.jsx("p",{className:"text-sm text-gray-600",children:(s==null?void 0:s.status)==="active"?"En cours":"PrÃªt Ã  commencer"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:b(T)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Temps Ã©coulÃ©"})]})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(D,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"mr-2",size:20}),"Progression: ",Math.round(V),"%"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(y,{variant:u?"default":"outline",size:"sm",onClick:()=>z(!u),className:"text-xs",children:u?"Mode Rapide":"Mode AvancÃ©"})})]})}),e.jsxs(I,{children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-300",style:{width:`${V}%`}})}),e.jsxs("div",{className:"flex space-x-2",children:[s.status==="active"?e.jsxs(y,{onClick:l,variant:"outline",className:"flex-1",children:[e.jsx(We,{className:"mr-2",size:16}),"Pause"]}):e.jsxs(y,{onClick:h,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(re,{className:"mr-2",size:16}),"Reprendre"]}),e.jsxs(y,{onClick:xe,className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(W,{className:"mr-2",size:16}),"Terminer"]}),e.jsxs(y,{onClick:o,variant:"outline",className:"flex-1 text-red-600 border-red-600 hover:bg-red-50",children:[e.jsx(Re,{className:"mr-2",size:16}),"ArrÃªter"]})]})]})]}),e.jsx(D,{className:"bg-blue-50 border-blue-100",children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[fe.createElement(se.icon,{size:18,className:"text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 text-sm mb-1",children:"Conseil d'entraÃ®nement"}),e.jsx("p",{className:"text-blue-700 text-xs",children:se.text})]})]})})}),e.jsx("div",{className:"space-y-3",children:s==null?void 0:s.exercises.map(t=>{var f,k;return e.jsx(D,{className:t.completed?"bg-green-50 border-green-200":"",children:e.jsxs(ve,{open:d===t.id,onOpenChange:x=>c(x?t.id:null),children:[e.jsx(Ne,{asChild:!0,children:e.jsx(J,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{className:"text-orange-500",size:16}),e.jsx("span",{children:t.name}),t.completed&&e.jsx(W,{className:"text-green-600",size:18})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(je,{variant:"outline",className:"text-xs",children:[((f=t.sets)==null?void 0:f.filter(x=>x.completed).length)||0,"/",((k=t.sets)==null?void 0:k.length)||0," sÃ©ries"]}),d===t.id?e.jsx(Te,{size:20,className:"text-gray-400"}):e.jsx(_e,{size:20,className:"text-gray-400"})]})]})})}),e.jsx(be,{children:e.jsx(I,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[t.sets&&t.sets.length>0?t.sets.map((x,j)=>e.jsxs("div",{className:`p-4 rounded-lg border-2 ${x.completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"font-medium text-gray-800",children:["SÃ©rie ",j+1]}),!x.completed&&e.jsxs(y,{onClick:()=>u?me(t.id,j):de(t.id,j),size:"sm",className:"bg-green-600 hover:bg-green-700 h-8",children:[e.jsx(W,{size:14,className:"mr-1"}),u?"Valider":"TerminÃ©"]})]}),!u&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 min-w-[40px]",children:"Reps:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{onClick:()=>A(t.id,j,"reps"),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:e.jsx(L,{size:14})}),(a==null?void 0:a.exerciseId)===t.id&&(a==null?void 0:a.setIndex)===j&&(a==null?void 0:a.field)==="reps"?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Z,{value:a.value,onChange:_=>S({...a,value:_.target.value}),className:"h-8 w-16 text-center text-sm"}),e.jsx(y,{onClick:F,size:"sm",className:"h-8 w-8 p-0",children:e.jsx(G,{size:12})})]}):e.jsxs("button",{onClick:()=>B(t.id,j,"reps"),className:"text-sm font-medium hover:text-blue-600 flex items-center space-x-1 min-w-[50px] justify-center h-8 px-2 border rounded",children:[e.jsx("span",{children:x.reps}),e.jsx(X,{size:10})]}),e.jsx(y,{onClick:()=>$(t.id,j,"reps"),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:e.jsx(q,{size:14})})]})]}),x.weight!==void 0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 min-w-[40px]",children:"Poids:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{onClick:()=>A(t.id,j,"weight"),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:e.jsx(L,{size:14})}),(a==null?void 0:a.exerciseId)===t.id&&(a==null?void 0:a.setIndex)===j&&(a==null?void 0:a.field)==="weight"?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Z,{value:a.value,onChange:_=>S({...a,value:_.target.value}),className:"h-8 w-16 text-center text-sm"}),e.jsx(y,{onClick:F,size:"sm",className:"h-8 w-8 p-0",children:e.jsx(G,{size:12})})]}):e.jsxs("button",{onClick:()=>B(t.id,j,"weight"),className:"text-sm font-medium hover:text-blue-600 flex items-center space-x-1 min-w-[60px] justify-center h-8 px-2 border rounded",children:[e.jsxs("span",{children:[x.weight,"kg"]}),e.jsx(X,{size:10})]}),e.jsx(y,{onClick:()=>$(t.id,j,"weight"),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:e.jsx(q,{size:14})})]})]}),x.duration!==void 0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 min-w-[40px]",children:"DurÃ©e:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{onClick:()=>A(t.id,j,"duration"),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:e.jsx(L,{size:14})}),(a==null?void 0:a.exerciseId)===t.id&&(a==null?void 0:a.setIndex)===j&&(a==null?void 0:a.field)==="duration"?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Z,{value:a.value,onChange:_=>S({...a,value:_.target.value}),className:"h-8 w-16 text-center text-sm"}),e.jsx(y,{onClick:F,size:"sm",className:"h-8 w-8 p-0",children:e.jsx(G,{size:12})})]}):e.jsxs("button",{onClick:()=>B(t.id,j,"duration"),className:"text-sm font-medium hover:text-blue-600 flex items-center space-x-1 min-w-[50px] justify-center h-8 px-2 border rounded",children:[e.jsxs("span",{children:[x.duration,"s"]}),e.jsx(X,{size:10})]}),e.jsx(y,{onClick:()=>$(t.id,j,"duration"),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:e.jsx(q,{size:14})})]})]})]}),u&&e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600",children:e.jsxs("span",{children:[x.reps," reps",x.weight&&` Ã— ${x.weight}kg`,x.duration&&` Ã— ${x.duration}s`]})})]},j)):e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"Aucune sÃ©rie configurÃ©e pour cet exercice"})}),!t.completed&&!u&&e.jsxs("div",{className:"flex space-x-2 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs(y,{onClick:()=>w(t.id),size:"sm",variant:"outline",className:"flex-1 text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(q,{className:"mr-1",size:14}),"Ajouter une sÃ©rie"]}),t.sets&&t.sets.length>1&&e.jsxs(y,{onClick:()=>p(t.id,t.sets.length-1),size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(L,{className:"mr-1",size:14}),"Supprimer la derniÃ¨re"]})]}),!t.completed&&e.jsxs(y,{onClick:()=>ue(t.id),className:"w-full bg-green-600 hover:bg-green-700 mt-4",children:[e.jsx(W,{className:"mr-2",size:16}),"Marquer comme terminÃ©"]})]})})})]})},t.id)})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(K,{size:64,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"PrÃªt pour l'entraÃ®nement ?"}),e.jsx("p",{className:"text-gray-600",children:"Commencez votre session d'entraÃ®nement maintenant"})]}),e.jsxs(y,{onClick:oe,size:"lg",className:"bg-red-600 hover:bg-red-700",children:[e.jsx(re,{className:"mr-2",size:20}),"Commencer l'entraÃ®nement"]})]}),s&&e.jsxs(D,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Se,{className:"mr-2",size:20}),"Statistiques de la session"]})}),e.jsx(I,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.floor(T/60)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Minutes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:H}),e.jsx("div",{className:"text-xs text-gray-500",children:"Exercices terminÃ©s"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:ee}),e.jsx("div",{className:"text-xs text-gray-500",children:"Calories estimÃ©es"})]})]})})]}),e.jsx(ye,{open:M,onOpenChange:R,children:e.jsxs(we,{className:"max-w-md",children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center",children:[e.jsx(ze,{className:"mr-2 text-yellow-500",size:24}),"Bravo ! Session terminÃ©e"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:b(T)}),e.jsx("p",{className:"text-gray-600",children:"Temps d'entraÃ®nement"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:H}),e.jsx("div",{className:"text-xs text-gray-500",children:"Exercices"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-orange-600",children:ee}),e.jsx("div",{className:"text-xs text-gray-500",children:"Calories"})]})]}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:e.jsxs("p",{className:"text-green-800 font-medium",children:["ðŸŽ‰ Excellent travail ! Vous avez terminÃ© ",Math.round(V),"% de votre programme."]})}),e.jsx(y,{onClick:()=>R(!1),className:"w-full",children:"Fermer"})]})]})})]})]})};export{fs as default};
//# sourceMappingURL=WorkoutPage-B_TYztaj.js.map
