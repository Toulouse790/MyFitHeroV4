import{d as b,e as ye,r as a,f as S,j as e}from"./index-CjnEZlsY.js";import{u as Ne}from"./use-toast-1UJezmcI.js";import{A as be}from"./AIIntelligence-4kibXt-7.js";import{U as we,S as Ce}from"./UniformHeader-CjBBS_mR.js";import{C as o,c,B as m,d as P,a as ke,b as Te}from"./badge-0XDKnG36.js";import{P as _e}from"./progress-B_6640an.js";import{S as T}from"./skeleton-COZohOJG.js";import{T as Me,a as ze,b as Z,c as W}from"./tabs-jX3VcdfO.js";import{C as J,b as K,a as De}from"./collapsible-Ch9BGInH.js";import{P as qe,D as Ae,d as $e,a as Se,b as Pe,c as Re}from"./dialog-W3FGrw5O.js";import{C as Ee}from"./calendar-D7qE-8IO.js";import{C as X}from"./clock-Dl80stQh.js";import{S as Y,E as Be}from"./sun-fN3_0x2t.js";import{U as He}from"./users-B-1ArgqR.js";import{Z as _}from"./zap-BxpV5bJv.js";import{u as Ie,B as f,C as Le}from"./chunk-PVWAREVJ-1IT8eIKF.js";import{H as R}from"./heart-Cxo5znlq.js";import{T as Oe}from"./trophy-CS6fcHcf.js";import{E as te}from"./eye-CSV1oSLp.js";import{S as E}from"./shield-BlXCgQw2.js";import{M as B,T as Ge}from"./triangle-alert--sfgpjrD.js";import{C as Ve}from"./circle-check-big-B5HpQEAC.js";import{P as Fe}from"./play-DXK2oa_h.js";import{C as U}from"./chart-column-CLHNa-_6.js";import{T as Qe}from"./trending-up-Cmv-0pKX.js";import{C as Ze,a as We}from"./chevron-up-FALq0kkK.js";import"./index-GGMoTRFm.js";import"./user-BtYr8gLe.js";import"./clsx-B-dksMZM.js";import"./index-DdwsCUG1.js";import"./index-QD0cdno-.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],ee=b("bed",Je);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Xe=b("lightbulb",Ke);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],se=b("phone",Ye);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],es=b("sparkles",Ue);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ie=b("timer",ss),is={contact:{emoji:"🛡️",sleepGoalHours:9,motivationalMessage:"Optimisez votre récupération physique pour l'impact.",benefits:[{icon:E,title:"Récup. Musculaire",value:"Maximale",color:"text-green-500",priority:"high"},{icon:R,title:"Réduction Inflam.",value:"Élevée",color:"text-red-500",priority:"high"},{icon:f,title:"Prise de décision",value:"+15%",color:"text-purple-500",priority:"medium"},{icon:_,title:"Puissance",value:"+10%",color:"text-yellow-500",priority:"medium"}],tips:[{icon:ee,title:"Priorité à la durée",description:"Visez 9h+ pour permettre à votre corps de réparer les micro-déchirures musculaires.",priority:"high"},{icon:B,title:"Routine de décompression",description:"Après un entraînement intense, une routine calme aide à baisser le rythme cardiaque.",priority:"medium"},{icon:se,title:"Zéro distraction",description:"Le sommeil est votre meilleur atout de récupération. Protégez-le des interruptions.",priority:"high"}]},endurance:{emoji:"🏃‍♀️",sleepGoalHours:8.5,motivationalMessage:"Améliorez la qualité de votre sommeil pour une meilleure endurance.",benefits:[{icon:R,title:"Santé Cardiaque",value:"Optimale",color:"text-red-500",priority:"high"},{icon:_,title:"Stockage Glycogène",value:"Amélioré",color:"text-yellow-500",priority:"high"},{icon:f,title:"Endurance Mentale",value:"+20%",color:"text-purple-500",priority:"medium"},{icon:E,title:"Système Immunitaire",value:"Renforcé",color:"text-green-500",priority:"medium"}],tips:[{icon:X,title:"Consistance des horaires",description:"Se coucher et se lever à la même heure stabilise votre rythme circadien.",priority:"high"},{icon:Y,title:"Exposition à la lumière",description:"La lumière du jour le matin aide à réguler votre horloge interne.",priority:"medium"},{icon:ee,title:"Qualité > Quantité",description:"Un sommeil profond et ininterrompu est plus réparateur.",priority:"high"}]},precision:{emoji:"🎯",sleepGoalHours:8,motivationalMessage:"Aiguisez votre concentration avec un repos mental parfait.",benefits:[{icon:f,title:"Clarté Mentale",value:"Maximale",color:"text-purple-500",priority:"high"},{icon:te,title:"Coordination Œil-main",value:"+18%",color:"text-blue-500",priority:"high"},{icon:_,title:"Temps de réaction",value:"Amélioré",color:"text-yellow-500",priority:"medium"},{icon:E,title:"Gestion du Stress",value:"Optimale",color:"text-green-500",priority:"medium"}],tips:[{icon:f,title:"Calme mental pré-sommeil",description:"Pratiquez la méditation ou la respiration profonde pour calmer votre esprit.",priority:"high"},{icon:se,title:"Déconnexion digitale",description:"Évitez les écrans et informations stressantes avant le coucher.",priority:"high"},{icon:Oe,title:"Visualisation pré-compétition",description:"Utilisez les dernières minutes pour visualiser le succès.",priority:"medium"}]},team:{emoji:"🤝",sleepGoalHours:8,motivationalMessage:"Synchronisez votre repos pour une performance d'équipe au top.",benefits:[{icon:He,title:"Cohésion d'équipe",value:"Améliorée",color:"text-blue-500",priority:"high"},{icon:_,title:"Niveau d'énergie",value:"Stable",color:"text-yellow-500",priority:"high"},{icon:f,title:"Tactique & Stratégie",value:"Mémoire +",color:"text-purple-500",priority:"medium"},{icon:R,title:"Endurance de match",value:"+10%",color:"text-red-500",priority:"medium"}],tips:[{icon:Ee,title:"Routine de veille de match",description:"Adoptez une routine fixe la veille des matchs pour réduire l'anxiété.",priority:"high"},{icon:X,title:"Consistance du groupe",description:"Des horaires réguliers aident à maintenir un niveau d'énergie homogène.",priority:"medium"},{icon:Y,title:"Réveil sans stress",description:`Évitez la touche "snooze" pour démarrer avec plus d'énergie.`,priority:"low"}]}},Ps=()=>{var G,V;const w=Ie(),{appStoreUser:s}=ye(),{toast:v}=Ne(),[h,ae]=a.useState(null),[re,le]=a.useState({target_hours:8,target_bedtime:"23:00",target_wake_time:"07:00",consistency_score:0}),[ne,H]=a.useState(!0),[g,oe]=a.useState([]),[x,I]=a.useState({active:!1}),[u,M]=a.useState(!1),[z,ce]=a.useState(!1),[me,de]=a.useState(!1),C=new Date().toISOString().split("T")[0],y=a.useCallback(i=>({american_football:"contact",rugby:"contact",hockey:"contact",boxing:"contact",mma:"contact",basketball:"team",football:"team",volleyball:"team",handball:"team",tennis:"precision",golf:"precision",snooker:"precision",archery:"precision",esports:"precision",running:"endurance",cycling:"endurance",swimming:"endurance",triathlon:"endurance","course à pied":"endurance"})[i==null?void 0:i.toLowerCase()]||"team",[])((s==null?void 0:s.sport)||"none"),l=is[y],p=a.useMemo(()=>{var t,r;let i=l.sleepGoalHours;return s!=null&&s.age&&(s.age<25&&(i+=.5),s.age>45&&(i+=.5)),(t=s==null?void 0:s.primary_goals)!=null&&t.includes("muscle_gain")&&(i+=.5),(r=s==null?void 0:s.primary_goals)!=null&&r.includes("performance")&&(i+=.5),s!=null&&s.training_frequency&&s.training_frequency>5&&(i+=.5),Math.min(i,10)},[s,l.sleepGoalHours]),k=a.useCallback(async()=>{if(s!=null&&s.id)try{H(!0);const{data:i,error:t}=await S.from("sleep_sessions").select("*").eq("user_id",s.id).eq("sleep_date",C).single(),r=new Date;r.setDate(r.getDate()-7);const{data:d,error:ve}=await S.from("sleep_sessions").select("*").eq("user_id",s.id).gte("sleep_date",r.toISOString().split("T")[0]).order("sleep_date",{ascending:!1});if(!t&&i?ae(i):t&&t.code!=="PGRST116"&&console.error("Erreur session:",t),!ve&&d&&(oe(d),d.length>0)){const F=d.filter(n=>n.bedtime).reduce((n,A)=>{const $=new Date(`2000-01-01T${A.bedtime}`).getTime();return n+$},0)/d.filter(n=>n.bedtime).length,Q=d.filter(n=>n.wake_time).reduce((n,A)=>{const $=new Date(`2000-01-01T${A.wake_time}`).getTime();return n+$},0)/d.filter(n=>n.wake_time).length;F&&Q&&le(n=>({...n,target_bedtime:new Date(F).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),target_wake_time:new Date(Q).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),consistency_score:Math.round(Math.random()*30+70)}))}}catch{console.error("Erreur chargement sommeil:",error)}finally{H(!1)}},[s==null?void 0:s.id,C]),D=a.useCallback(()=>{I({active:!0,startTime:new Date}),v({title:"Timer de sommeil démarré",description:"Bonne nuit ! 🌙"})},[v]),xe=a.useCallback(async()=>{if(!x.startTime||!(s!=null&&s.id))return;const i=new Date,t=i.getTime()-x.startTime.getTime(),r=Math.floor(t/6e4);try{const{error:d}=await S.from("sleep_sessions").insert({user_id:s.id,sleep_date:C,bedtime:x.startTime.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),wake_time:i.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),duration_minutes:r,created_at:i.toISOString()});if(d)throw d;I({active:!1}),await k(),v({title:"Session de sommeil enregistrée",description:`${Math.floor(r/60)}h${r%60}min de sommeil`})}catch{console.error("Erreur sauvegarde sommeil:",error),v({title:"Erreur",description:"Impossible de sauvegarder la session",variant:"destructive"})}},[x,s==null?void 0:s.id,C,k,v]),N=h!=null&&h.duration_minutes?h.duration_minutes/60:0,L=N/p*100,j=Math.max(0,p-N),q=g.length>0?g.reduce((i,t)=>i+(t.duration_minutes||0),0)/g.length/60:0,he=a.useCallback(()=>{const i=(s==null?void 0:s.first_name)||(s==null?void 0:s.username)||"Champion",t=N/p*100;return t>=95?`😴 Parfait ${i} ! Sommeil optimal pour ${s==null?void 0:s.sport}`:t>=80?`💤 Très bien ${i}, ta récupération est sur la bonne voie !`:t>=60?`⏰ ${i}, quelques heures de plus t'aideraient pour ${s==null?void 0:s.sport}`:`🚨 ${i}, ton corps a besoin de plus de récupération !`},[N,p,s]),ue=a.useCallback(()=>{const i=Math.round(j*60);return i>0?`Pour optimiser vos performances en ${s==null?void 0:s.sport}, couchez-vous ${i} minutes plus tôt.`:`Votre sommeil est parfaitement adapté à vos besoins en ${s==null?void 0:s.sport} !`},[j,s==null?void 0:s.sport]),O=({tip:i})=>{const t=i.icon,r={high:"border-l-red-500 bg-red-50",medium:"border-l-yellow-500 bg-yellow-50",low:"border-l-blue-500 bg-blue-50"};return e.jsx(o,{className:`border-l-4 ${r[i.priority]}`,children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(t,{size:20,className:"text-gray-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-1",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600",children:i.description})]})]})})})},pe=a.useCallback(()=>l.benefits.filter(i=>i.priority==="high").slice(0,2),[l.benefits]),ge=a.useCallback(()=>l.tips.filter(i=>i.priority==="high").slice(0,2),[l.tips]);a.useEffect(()=>{k()},[k]);const je=pe(),fe=ge();return ne?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"px-4 py-6 space-y-6 max-w-2xl mx-auto",children:[e.jsx(T,{className:"h-20 w-full"}),e.jsx(T,{className:"h-32 w-full"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Array.from({length:4}).map((i,t)=>e.jsx(T,{className:"h-20"},t))}),e.jsx(T,{className:"h-24 w-full"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"px-4 py-6 space-y-6 max-w-2xl mx-auto",children:[e.jsx(we,{title:"Sommeil",subtitle:`${l.emoji} ${he()}`,showBackButton:!0,showSettings:!0,showNotifications:!0,showProfile:!0,gradient:!0}),x.active&&e.jsx(o,{className:"border-purple-200 bg-purple-50",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-800",children:"Timer en cours"}),e.jsxs("p",{className:"text-sm text-purple-600",children:["Démarré à"," ",(G=x.startTime)==null?void 0:G.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs(m,{onClick:xe,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Réveil"]})]})})}),e.jsx(o,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:e.jsxs(c,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-lg flex items-center space-x-2",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{children:"Dernière Nuit"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>M(!u),className:"text-white hover:bg-white/20",children:u?e.jsx(Be,{className:"h-4 w-4"}):e.jsx(te,{className:"h-4 w-4"})}),e.jsxs(P,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:[y," ",l.emoji]})]})]}),h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold mb-1",children:[N.toFixed(1),"h"]}),e.jsxs("div",{className:"text-white/80 text-sm",children:["sur ",p,"h (",y,")"]}),e.jsx("div",{className:"text-white/70 text-xs mt-1",children:j>0?`${Math.round(j*60)} min de déficit`:"Objectif atteint ! 🎉"})]}),u&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:[h.quality_rating||"--","/5"]}),e.jsx("div",{className:"text-white/80 text-xs",children:"Qualité"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:[Math.round(L),"%"]}),e.jsx("div",{className:"text-white/80 text-xs",children:"Objectif"})]})]}),e.jsxs("div",{className:"text-center text-sm text-white/80",children:["Couché: ",h.bedtime||"--"," • Levé: ",h.wake_time||"--"]}),e.jsx(_e,{value:Math.min(L,100),className:"h-3 bg-white/20"}),!x.active&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(m,{onClick:D,variant:"secondary",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Nouveau timer"]})})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-white/80 mb-4",children:"Aucune donnée de sommeil aujourd'hui"}),!x.active&&e.jsxs(m,{onClick:D,variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Démarrer le timer"]})]})]})}),j>0&&e.jsx(o,{className:"bg-amber-50 border-amber-200",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"h-5 w-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800 mb-1",children:"Recommandation personnalisée"}),e.jsx("p",{className:"text-amber-700 text-sm",children:ue()}),e.jsx("div",{className:"mt-2 p-2 bg-amber-100 rounded-md",children:e.jsxs("p",{className:"text-xs text-amber-800",children:[e.jsx("strong",{children:"Déficit:"})," -",Math.round(j*60)," minutes pour un sommeil optimal"]})})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Vos Stats"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{variant:u?"default":"outline",size:"sm",onClick:()=>M(!u),className:"text-xs",children:u?"Vue Simple":"Vue Détaillée"}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>w("/sleep/history"),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Historique"]})]})]}),u?e.jsxs(Me,{defaultValue:"weekly",className:"w-full",children:[e.jsxs(ze,{className:"grid w-full grid-cols-2",children:[e.jsx(Z,{value:"weekly",children:"Cette semaine"}),e.jsx(Z,{value:"benefits",children:"Bénéfices"})]}),e.jsx(W,{value:"weekly",children:g.length>0&&e.jsx(o,{children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[q.toFixed(1),"h"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Moyenne"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[re.consistency_score,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Consistance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[Math.round(q/p*100),"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Objectif"})]})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsxs(P,{variant:"outline",className:"text-xs",children:[g.length," nuits enregistrées"]})})]})})}),e.jsx(W,{value:"benefits",children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:l.benefits.map((i,t)=>{const r=i.icon;return e.jsx(o,{children:e.jsx(c,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{size:18,className:i.color}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 text-sm",children:i.title}),e.jsx("div",{className:`text-xs font-bold ${i.color}`,children:i.value})]})]})})},t)})})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:je.map((i,t)=>{const r=i.icon;return e.jsx(o,{className:"bg-gray-50",children:e.jsx(c,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{size:16,className:i.color}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 text-xs",children:i.title}),e.jsx("div",{className:`text-xs font-bold ${i.color}`,children:i.value})]})]})})},t)})}),g.length>0&&e.jsx(o,{className:"bg-white",children:e.jsx(c,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Cette semaine"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[q.toFixed(1),"h"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"moyenne"})]})]})})})]})]}),e.jsxs(o,{children:[e.jsx(ke,{children:e.jsx(Te,{className:"text-sm",children:"Actions rapides"})}),e.jsx(c,{className:"p-4 pt-0",children:e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[!x.active&&e.jsxs(m,{onClick:D,className:"bg-purple-600 hover:bg-purple-700 h-12 flex flex-col space-y-1 text-xs",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:"Timer"})]}),e.jsxs(m,{onClick:()=>w("/sleep/log"),variant:"outline",className:"h-12 flex flex-col space-y-1 text-xs",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:"Ajouter"})]}),e.jsxs(m,{onClick:()=>w("/sleep/history"),variant:"outline",className:"h-12 flex flex-col space-y-1 text-xs",children:[e.jsx(Qe,{size:16}),e.jsx("span",{children:"Historique"})]}),e.jsxs(m,{onClick:()=>w("/sleep/settings"),variant:"outline",className:"h-12 flex flex-col space-y-1 text-xs",children:[e.jsx(Ce,{size:16}),e.jsx("span",{children:"Réglages"})]})]})})]}),e.jsx(o,{className:"bg-gradient-to-r from-gray-50 to-purple-50 border-purple-100",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(f,{size:20,className:"text-purple-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-purple-800 mb-1",children:"Analyse de votre profil"}),e.jsxs("p",{className:"text-purple-700 text-sm mb-2",children:["En tant que ",(s==null?void 0:s.gender)==="male"?"pratiquant":"pratiquante"," de"," ",s==null?void 0:s.sport,"de ",(s==null?void 0:s.age)||"?"," ans, votre objectif de sommeil est ajusté à"," ",p,"h."]}),e.jsx(J,{open:u,onOpenChange:M,children:e.jsxs(K,{className:"text-xs text-purple-600 space-y-1 mt-2",children:[e.jsxs("p",{children:["• Sport ",y,": ",l.sleepGoalHours,"h de base"]}),(s==null?void 0:s.training_frequency)&&s.training_frequency>5&&e.jsxs("p",{children:["• Entraînement intensif (",s.training_frequency,"x/sem): +0.5h"]}),((V=s==null?void 0:s.primary_goals)==null?void 0:V.includes("muscle_gain"))&&e.jsx("p",{children:"• Objectif prise de masse: +0.5h récupération"})]})})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{size:20,className:"text-yellow-500"}),e.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Conseils pour ",y]})]}),e.jsxs(P,{variant:"outline",className:"text-xs",children:[l.tips.length," conseils"]})]}),e.jsx("div",{className:"space-y-3",children:fe.map((i,t)=>e.jsx(O,{tip:i},t))}),e.jsxs(J,{open:z,onOpenChange:ce,children:[e.jsx(De,{asChild:!0,children:e.jsxs(m,{variant:"ghost",className:"w-full text-sm",children:[z?"Voir moins":`Voir tous les conseils (${l.tips.length-2} autres)`,z?e.jsx(Ze,{className:"h-4 w-4 ml-2"}):e.jsx(We,{className:"h-4 w-4 ml-2"})]})}),e.jsx(K,{className:"space-y-3 mt-3",children:l.tips.filter(i=>i.priority!=="high").map((i,t)=>e.jsx(O,{tip:i},t))})]})]}),e.jsx(o,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(es,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Analyse IA Sommeil"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Coaching personnalisé et prédictions"})]})]}),e.jsxs(Ae,{open:me,onOpenChange:de,children:[e.jsx($e,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",children:["Ouvrir ",e.jsx(Le,{className:"h-3 w-3 ml-1"})]})}),e.jsxs(Se,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Pe,{children:e.jsx(Re,{children:"Analyse IA Sommeil"})}),e.jsx(be,{pillar:"sleep",showPredictions:!0,showCoaching:!0,showRecommendations:!0})]})]})]})})}),e.jsx(o,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-bold mb-2",children:l.motivationalMessage}),e.jsxs("p",{className:"text-purple-100 text-sm",children:["Le sommeil n'est pas du temps perdu, c'est votre arme secrète pour exceller en"," ",s==null?void 0:s.sport," !"]})]})})]})})};export{Ps as default};
//# sourceMappingURL=SleepPage-N04ouMsM.js.map
