import{j as e,r as c,f as j,u as v}from"./index-CjnEZlsY.js";import{C as u,d as n,B as a}from"./badge-0XDKnG36.js";import{u as b}from"./use-toast-1UJezmcI.js";import"./clsx-B-dksMZM.js";import"./index-GGMoTRFm.js";const y=({userProfile:r})=>e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de bord Admin"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gestion et administration de MyFitHero"})]}),r&&e.jsx(u,{className:"mb-6 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Profil Administrateur"}),e.jsx("p",{className:"text-gray-600",children:r.email||r.id})]}),e.jsx(n,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:r.role})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Utilisateurs"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total utilisateurs"}),e.jsx(n,{variant:"outline",children:"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Nouveaux (7j)"}),e.jsx(n,{variant:"outline",children:"--"})]}),e.jsx(a,{variant:"outline",size:"sm",className:"w-full",children:"G√©rer les utilisateurs"})]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Workouts"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total workouts"}),e.jsx(n,{variant:"outline",children:"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aujourd'hui"}),e.jsx(n,{variant:"outline",children:"--"})]}),e.jsx(a,{variant:"outline",size:"sm",className:"w-full",children:"Voir les statistiques"})]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Syst√®me"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status"}),e.jsx(n,{className:"bg-green-100 text-green-800",children:"Actif"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Version"}),e.jsx(n,{variant:"outline",children:"v4.0"})]}),e.jsx(a,{variant:"outline",size:"sm",className:"w-full",children:"Param√®tres syst√®me"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Actions rapides"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(a,{variant:"outline",className:"w-full justify-start",children:"üìä Voir les analytics"}),e.jsx(a,{variant:"outline",className:"w-full justify-start",children:"üë• G√©rer les utilisateurs"}),e.jsx(a,{variant:"outline",className:"w-full justify-start",children:"üí≥ Gestion des paiements"}),e.jsx(a,{variant:"outline",className:"w-full justify-start",children:"üì± Notifications"}),e.jsx(a,{variant:"outline",className:"w-full justify-start",children:"üéØ Support utilisateurs"})]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Activit√© r√©cente"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"Nouveau utilisateur inscrit"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Il y a 2 heures"})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"Workout compl√©t√©"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Il y a 3 heures"})]}),e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"Erreur syst√®me r√©solue"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Il y a 5 heures"})]})]})]})]})]})}),w=()=>{const[r,s]=c.useState(null),[l,o]=c.useState(null),[m,d]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const{data:{session:t},error:i}=await j.auth.getSession();if(i)throw i;o(t),s((t==null?void 0:t.user)||null)}catch{console.error("Error checking user:",error),s(null)}finally{d(!1)}})();const{data:{subscription:p}}=j.auth.onAuthStateChange(async(t,i)=>{s((i==null?void 0:i.user)??null),d(!1)});return()=>p.unsubscribe()},[]),{isAuthenticated:!!r,user:r,session:l,loading:m,signOut:async()=>{try{const{error:x}=await j.auth.signOut();if(x)throw x;s(null)}catch{console.error("Error signing out:",error)}}}},V=()=>{const[r,s]=v(),{session:l,loading:o,isAuthenticated:m}=w(),{toast:d}=b(),[f,x]=c.useState(null),[p,t]=c.useState(!0),i=async N=>{try{const{data:h,error:g}=await j.from("user_profiles").select("id, role").eq("id",N).single();return g?(console.error("Erreur r√©cup√©ration profil:",g),null):h}catch{return console.error("Erreur fetchUserProfile:",error),null}};return c.useEffect(()=>{(async()=>{if(o)return;if(!m||!(l!=null&&l.user)){s("/login");return}t(!0);const h=await i(l.user.id);if(!h){d({title:"Erreur d'acc√®s",description:"Impossible de v√©rifier vos permissions",variant:"destructive"}),s("/");return}if(x(h),h.role!=="admin"){d({title:"Acc√®s refus√©",description:"Vous n'avez pas les permissions pour acc√©der √† cette page",variant:"destructive"}),s("/");return}t(!1)})()},[l,o,m,s,d]),o||p?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600 text-sm",children:o?"V√©rification de l'authentification...":"V√©rification des permissions..."}),e.jsx("span",{className:"sr-only",children:"Chargement de la page d\\'administration"})]}):!m||!f||f.role!=="admin"?null:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-red-600 text-white px-4 py-2 text-center text-sm font-medium",children:"üîí Mode Administrateur - Acc√®s restreint"}),e.jsx(y,{})]})};export{V as default};
//# sourceMappingURL=AdminPage-BNdGCIjD.js.map
