import{d as _,g as es,r as i,j as e,e as ss}from"./index-CjnEZlsY.js";import{u as as}from"./use-toast-1UJezmcI.js";import{U as oe}from"./UniformHeader-CjBBS_mR.js";import{e as Q,B as f,C as w,c as b,a as de,b as me,d as M}from"./badge-0XDKnG36.js";import{I as C}from"./input-BbNGe5Ek.js";import{T as ts,a as ue}from"./textarea-C4XsJauq.js";import{P as is}from"./progress-B_6640an.js";import{T as ns,a as rs,b as ls,c as V}from"./tabs-jX3VcdfO.js";import{S as I,a as z,b as T,c as E,d as o,e as cs}from"./select-_IJcDPV4.js";import{c as os,P as W,u as ds,a as K}from"./index-DdwsCUG1.js";import{S as G}from"./skeleton-COZohOJG.js";import{P as ms,D as xe,a as he,b as je,c as ve}from"./dialog-W3FGrw5O.js";import{A as us}from"./AIIntelligence-4kibXt-7.js";import{T as q}from"./target-Di6UzvH3.js";import{U as H}from"./users-B-1ArgqR.js";import{T as J}from"./trophy-CS6fcHcf.js";import{A as xs}from"./award-BcNAyl6q.js";import{H as hs}from"./heart-Cxo5znlq.js";import"./index-GGMoTRFm.js";import"./trending-up-Cmv-0pKX.js";import"./user-BtYr8gLe.js";import"./clsx-B-dksMZM.js";import"./index-QD0cdno-.js";import"./index-Dxu7zm8J.js";import"./chevron-up-FALq0kkK.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],vs=_("bookmark",js);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],gs=_("crown",fs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fe=_("funnel",_s);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ns=_("image",ys);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ws=_("map-pin",ps);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],ks=_("medal",bs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ge=_("message-circle",Cs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],As=_("message-square",Ds);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_e=_("send",Ls);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ms=_("star",Ps);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],zs=_("user-plus",Is);function Ts(){return es.useSyncExternalStore(Es,()=>!0,()=>!1)}function Es(){return()=>{}}var X="Avatar",[$s,da]=os(X),[Fs,Ne]=$s(X),pe=i.forwardRef((s,n)=>{const{__scopeAvatar:u,...h}=s,[j,c]=i.useState("idle");return e.jsx(Fs,{scope:u,imageLoadingStatus:j,onImageLoadingStatusChange:c,children:e.jsx(W.span,{...h,ref:n})})});pe.displayName=X;var we="AvatarImage",be=i.forwardRef((s,n)=>{const{__scopeAvatar:u,src:h,onLoadingStatusChange:j=()=>{},...c}=s,y=Ne(we,u),v=Rs(h,c),N=ds(k=>{j(k),y.onImageLoadingStatusChange(k)});return K(()=>{v!=="idle"&&N(v)},[v,N]),v==="loaded"?e.jsx(W.img,{...c,ref:n,src:h}):null});be.displayName=we;var ke="AvatarFallback",Ce=i.forwardRef((s,n)=>{const{__scopeAvatar:u,delayMs:h,...j}=s,c=Ne(ke,u),[y,v]=i.useState(h===void 0);return i.useEffect(()=>{if(h!==void 0){const N=window.setTimeout(()=>v(!0),h);return()=>window.clearTimeout(N)}},[h]),y&&c.imageLoadingStatus!=="loaded"?e.jsx(W.span,{...j,ref:n}):null});Ce.displayName=ke;function ye(s,n){return s?n?(s.src!==n&&(s.src=n),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Rs(s,{referrerPolicy:n,crossOrigin:u}){const h=Ts(),j=i.useRef(null),c=h?(j.current||(j.current=new window.Image),j.current):null,[y,v]=i.useState(()=>ye(c,s));return K(()=>{v(ye(c,s))},[c,s]),K(()=>{const N=O=>()=>{v(O)};if(!c)return;const k=N("loaded"),x=N("error");return c.addEventListener("load",k),c.addEventListener("error",x),n&&(c.referrerPolicy=n),typeof u=="string"&&(c.crossOrigin=u),()=>{c.removeEventListener("load",k),c.removeEventListener("error",x)}},[c,u,n]),y}var De=pe,Ae=be,Le=Ce;const D=i.forwardRef(({className:s,...n},u)=>e.jsx(De,{ref:u,className:Q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...n}));D.displayName=De.displayName;const $=i.forwardRef(({className:s,...n},u)=>e.jsx(Ae,{ref:u,className:Q("aspect-square h-full w-full",s),...n}));$.displayName=Ae.displayName;const A=i.forwardRef(({className:s,...n},u)=>e.jsx(Le,{ref:u,className:Q("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...n}));A.displayName=Le.displayName;const ma=()=>{const{appStoreUser:s}=ss(),{toast:n}=as(),[u,h]=i.useState("feed"),[j,c]=i.useState([]),[y,v]=i.useState([]),[N,k]=i.useState([]),[x,O]=i.useState(null),[Pe,Y]=i.useState(!0),[Me,Z]=i.useState(!1),[Ie,S]=i.useState(!1),[ze,F]=i.useState(!1),[Te,R]=i.useState(!1),[U,Ee]=i.useState(null),[ee,$e]=i.useState("all"),[se,Fe]=i.useState("active"),[L,Re]=i.useState(""),[P,ae]=i.useState(""),[g,B]=i.useState({content:"",post_type:"general",media_files:[],achievements:[],location:""}),[m,p]=i.useState({title:"",description:"",pillar:"workout",challenge_type:"community",target_value:0,target_unit:"",duration_days:7,difficulty:"medium",reward_points:100}),te=i.useCallback(async()=>{if(s!=null&&s.id)try{O({friends_count:24,active_challenges:8,global_rank:47,total_points:1240,streak_days:12,achievements_count:15})}catch{console.error("Erreur chargement stats:",error)}},[s==null?void 0:s.id]),ie=i.useCallback(async()=>{if(s!=null&&s.id){Z(!0);try{const a=[{id:"1",user_id:"user1",content:`Nouveau record personnel ! 🔥 J'ai terminé mon entraînement ${s.sport} en 45min aujourd'hui. Les conseils de l'IA MyFitHero ont vraiment payé !`,post_type:"achievement",media_urls:[],likes_count:23,comments_count:7,shares_count:3,is_liked:!1,is_bookmarked:!1,created_at:new Date(Date.now()-72e5).toISOString(),user:{id:"user1",name:"Marie Dupont",username:"marie_fit",avatar_url:"",sport:s.sport||"fitness",level:8},achievements:[{type:"personal_record",value:"45min",description:`Record ${s.sport}`}],comments:[{id:"c1",post_id:"1",user_id:"user2",content:"Bravo Marie ! Quel est ton secret ?",created_at:new Date(Date.now()-36e5).toISOString(),user:{name:"Thomas Martin",username:"tom_athlete",avatar_url:""}}]},{id:"2",user_id:"user2",content:`Défi ${s.sport} de la semaine : qui peut tenir la position la plus longtemps ? 💪 J'ai tenu 2min30s ! #MyFitHeroChallenge`,post_type:"challenge",media_urls:[],likes_count:41,comments_count:12,shares_count:8,is_liked:!0,is_bookmarked:!0,created_at:new Date(Date.now()-18e6).toISOString(),user:{id:"user2",name:"Thomas Martin",username:"tom_athlete",sport:s.sport||"fitness",level:12},comments:[]}];c(a)}catch{console.error("Erreur chargement posts:",error)}finally{Z(!1)}}},[s==null?void 0:s.id,s==null?void 0:s.sport,ee]),ne=i.useCallback(async()=>{if(s!=null&&s.id){S(!0);try{const a=[{id:"1",title:`Défi ${s.sport} 30 jours`,description:`Entraînement quotidien de ${s.sport} pendant 30 jours`,creator_id:"creator1",pillar:"workout",challenge_type:"community",target_value:30,target_unit:"jours",duration_days:30,difficulty:"medium",reward_points:500,start_date:new Date().toISOString(),end_date:new Date(Date.now()+2592e6).toISOString(),participants_count:127,is_participating:!0,progress_percentage:40,creator:{name:"Coach Sophie",username:"coach_sophie",avatar_url:""}},{id:"2",title:"Hydratation Parfaite",description:"Boire 2.5L d'eau par jour pendant 14 jours",creator_id:"creator2",pillar:"hydration",challenge_type:"individual",target_value:2.5,target_unit:"litres/jour",duration_days:14,difficulty:"easy",reward_points:200,start_date:new Date().toISOString(),end_date:new Date(Date.now()+12096e5).toISOString(),participants_count:89,is_participating:!1,progress_percentage:0,creator:{name:"Dr. Martin",username:"dr_nutrition",avatar_url:""}}];v(a)}catch{console.error("Erreur chargement challenges:",error)}finally{S(!1)}}},[s==null?void 0:s.id,s==null?void 0:s.sport,se]),re=i.useCallback(async()=>{if(s!=null&&s.id)try{const a=[{id:"friend1",name:"Marie Dupont",username:"marie_fit",avatar_url:"",sport:s.sport||"fitness",level:8,is_online:!0,mutual_friends:5,last_activity:new Date(Date.now()-18e5).toISOString()},{id:"friend2",name:"Thomas Martin",username:"tom_athlete",avatar_url:"",sport:"crossfit",level:12,is_online:!1,mutual_friends:3,last_activity:new Date(Date.now()-72e5).toISOString()},{id:"friend3",name:"Sophie Laurent",username:"sophie_coach",avatar_url:"",sport:s.sport||"fitness",level:15,is_online:!0,mutual_friends:8,last_activity:new Date(Date.now()-6e5).toISOString()}];k(a)}catch{console.error("Erreur chargement amis:",error)}},[s==null?void 0:s.id,s==null?void 0:s.sport]),Ve=i.useCallback(async()=>{if(!g.content.trim()){n({title:"Erreur",description:"Le contenu du post ne peut pas être vide",variant:"destructive"});return}try{await new Promise(t=>setTimeout(t,1500));const a={id:Date.now().toString(),user_id:(s==null?void 0:s.id)||"",content:g.content,post_type:g.post_type,media_urls:[],likes_count:0,comments_count:0,shares_count:0,is_liked:!1,is_bookmarked:!1,created_at:new Date().toISOString(),user:{id:(s==null?void 0:s.id)||"",name:(s==null?void 0:s.first_name)||(s==null?void 0:s.username)||"Utilisateur",username:(s==null?void 0:s.username)||"user",sport:(s==null?void 0:s.sport)||"fitness",level:5},achievements:g.achievements,comments:[]};c(t=>[a,...t]),n({title:"Post publié !",description:"Votre post a été partagé avec la communauté",action:{label:"Voir",onClick:()=>h("feed")}}),B({content:"",post_type:"general",media_files:[],achievements:[],location:""}),F(!1),typeof window<"u"&&window.gtag&&window.gtag("event","social_post_created",{post_type:g.post_type,content_length:g.content.length,user_sport:s==null?void 0:s.sport,user_id:s==null?void 0:s.id})}catch{console.error("Erreur création post:",error),n({title:"Erreur",description:"Impossible de publier le post",variant:"destructive"})}},[g,s,n]),qe=i.useCallback(async()=>{if(!m.title.trim()||!m.description.trim()){n({title:"Erreur",description:"Titre et description sont requis",variant:"destructive"});return}try{await new Promise(t=>setTimeout(t,2e3));const a={id:Date.now().toString(),...m,creator_id:(s==null?void 0:s.id)||"",start_date:new Date().toISOString(),end_date:new Date(Date.now()+m.duration_days*24*60*60*1e3).toISOString(),participants_count:1,is_participating:!0,progress_percentage:0,creator:{name:(s==null?void 0:s.first_name)||(s==null?void 0:s.username)||"Utilisateur",username:(s==null?void 0:s.username)||"user",avatar_url:""}};v(t=>[a,...t]),n({title:"Défi créé !",description:"Votre défi est maintenant disponible pour la communauté",action:{label:"Voir les défis",onClick:()=>h("challenges")}}),p({title:"",description:"",pillar:"workout",challenge_type:"community",target_value:0,target_unit:"",duration_days:7,difficulty:"medium",reward_points:100}),R(!1),typeof window<"u"&&window.gtag&&window.gtag("event","social_challenge_created",{pillar:m.pillar,difficulty:m.difficulty,duration_days:m.duration_days,user_sport:s==null?void 0:s.sport,user_id:s==null?void 0:s.id})}catch{console.error("Erreur création challenge:",error),n({title:"Erreur",description:"Impossible de créer le défi",variant:"destructive"})}},[m,s,n]),He=i.useCallback(async a=>{c(t=>t.map(r=>r.id===a?{...r,is_liked:!r.is_liked,likes_count:r.is_liked?r.likes_count-1:r.likes_count+1}:r)),typeof window<"u"&&window.gtag&&window.gtag("event","social_post_liked",{post_id:a,user_id:s==null?void 0:s.id})},[s==null?void 0:s.id]),Oe=i.useCallback(async a=>{c(r=>r.map(l=>l.id===a?{...l,is_bookmarked:!l.is_bookmarked}:l));const t=j.find(r=>r.id===a);n({title:t!=null&&t.is_bookmarked?"Retiré des favoris":"Ajouté aux favoris",description:t!=null&&t.is_bookmarked?"Post retiré de vos favoris":"Post ajouté à vos favoris"})},[j,n]),Be=i.useCallback(async a=>{window.confirm("Êtes-vous sûr de vouloir supprimer ce post ?")&&(c(t=>t.filter(r=>r.id!==a)),n({title:"Post supprimé",description:"Votre post a bien été supprimé."}))},[n]),le=i.useCallback(async a=>{if(!P.trim())return;const t={id:Date.now().toString(),post_id:a,user_id:(s==null?void 0:s.id)||"",content:P,created_at:new Date().toISOString(),user:{name:(s==null?void 0:s.first_name)||(s==null?void 0:s.username)||"Utilisateur",username:(s==null?void 0:s.username)||"user",avatar_url:""}};c(r=>r.map(l=>l.id===a?{...l,comments:[...l.comments||[],t],comments_count:l.comments_count+1}:l)),ae(""),n({title:"Commentaire ajouté !"})},[P,s,n]),Ge=i.useCallback(async a=>{const t=y.find(l=>l.id===a);if(t!=null&&t.is_participating&&!window.confirm("Voulez-vous vraiment quitter ce défi ?"))return;v(l=>l.map(d=>d.id===a?{...d,is_participating:!d.is_participating,participants_count:d.is_participating?d.participants_count-1:d.participants_count+1}:d));const r=y.find(l=>l.id===a);n({title:r!=null&&r.is_participating?"Défi quitté":"Défi rejoint !",description:r!=null&&r.is_participating?"Vous avez quitté ce défi":`Vous participez maintenant au défi "${r==null?void 0:r.title}"`})},[y,n]),Je=i.useCallback(async a=>{n({title:"Demande d'ami envoyée",description:"Votre demande d'ami a été envoyée."})},[n]),Ke=i.useMemo(()=>{const a=(s==null?void 0:s.first_name)||(s==null?void 0:s.username)||"Champion";return`🌟 Connectez-vous avec la communauté ${(s==null?void 0:s.sport)||"sport"}, ${a} !`},[s]),ce=i.useMemo(()=>N.filter(a=>a.name.toLowerCase().includes(L.toLowerCase())||a.username.toLowerCase().includes(L.toLowerCase())),[N,L]);i.useEffect(()=>{(async()=>{Y(!0),await Promise.all([te(),ie(),ne(),re()]),Y(!1)})()},[te,ie,ne,re]);const Qe=()=>{var a,t;return e.jsx(xe,{open:ze,onOpenChange:F,children:e.jsxs(he,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(je,{children:e.jsx(ve,{children:"Créer un post"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{children:e.jsx(A,{children:(((a=s==null?void 0:s.first_name)==null?void 0:a[0])||((t=s==null?void 0:s.username)==null?void 0:t[0])||"U").toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(s==null?void 0:s.first_name)||(s==null?void 0:s.username)}),e.jsx("p",{className:"text-sm text-gray-500",children:s==null?void 0:s.sport})]})]}),e.jsxs(I,{value:g.post_type,onValueChange:r=>B(l=>({...l,post_type:r})),children:[e.jsx(z,{children:e.jsx(T,{placeholder:"Type de post"})}),e.jsxs(E,{children:[e.jsx(o,{value:"general",children:"📝 Général"}),e.jsx(o,{value:"achievement",children:"🏆 Achievement"}),e.jsx(o,{value:"workout",children:"💪 Workout"}),e.jsx(o,{value:"progress",children:"📈 Progrès"})]})]}),e.jsx(ue,{value:g.content,onChange:r=>B(l=>({...l,content:r.target.value})),placeholder:`Partagez votre expérience ${s==null?void 0:s.sport}, vos achievements, vos conseils...`,className:"min-h-32 resize-none",maxLength:500}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.content.length,"/500 caractères"]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Photo"]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Lieu"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(f,{variant:"outline",onClick:()=>F(!1),children:"Annuler"}),e.jsxs(f,{onClick:Ve,disabled:!g.content.trim(),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Publier"]})]})]})]})})},We=()=>e.jsx(xe,{open:Te,onOpenChange:R,children:e.jsxs(he,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(je,{children:[e.jsx(ve,{children:"Créer un défi"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Créez un défi motivant pour la communauté ",s==null?void 0:s.sport]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{value:m.title,onChange:a=>p(t=>({...t,title:a.target.value})),placeholder:`ex: Défi ${s==null?void 0:s.sport} 30 jours`,maxLength:100}),e.jsx(ue,{value:m.description,onChange:a=>p(t=>({...t,description:a.target.value})),placeholder:"Décrivez votre défi en détail...",className:"min-h-24 resize-none",maxLength:300}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(I,{value:m.pillar,onValueChange:a=>p(t=>({...t,pillar:a})),children:[e.jsx(z,{children:e.jsx(T,{})}),e.jsxs(E,{children:[e.jsx(o,{value:"workout",children:"💪 Entraînement"}),e.jsx(o,{value:"nutrition",children:"🍎 Nutrition"}),e.jsx(o,{value:"hydration",children:"💧 Hydratation"}),e.jsx(o,{value:"sleep",children:"😴 Sommeil"}),e.jsx(o,{value:"general",children:"⭐ Général"})]})]}),e.jsxs(I,{value:m.difficulty,onValueChange:a=>p(t=>({...t,difficulty:a})),children:[e.jsx(z,{children:e.jsx(T,{})}),e.jsxs(E,{children:[e.jsx(o,{value:"easy",children:"🟢 Facile"}),e.jsx(o,{value:"medium",children:"🟡 Moyen"}),e.jsx(o,{value:"hard",children:"🟠 Difficile"}),e.jsx(o,{value:"expert",children:"🔴 Expert"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{type:"number",value:m.target_value||"",onChange:a=>p(t=>({...t,target_value:parseInt(a.target.value)||0})),placeholder:"Objectif"}),e.jsx(C,{value:m.target_unit,onChange:a=>p(t=>({...t,target_unit:a.target.value})),placeholder:"Unité (km, reps...)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Durée (jours)"}),e.jsx(C,{type:"number",value:m.duration_days||"",onChange:a=>p(t=>({...t,duration_days:parseInt(a.target.value)||1})),min:"1",max:"365"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Points récompense"}),e.jsx(C,{type:"number",value:m.reward_points||"",onChange:a=>p(t=>({...t,reward_points:parseInt(a.target.value)||10})),min:"10",step:"10"})]})]}),e.jsxs(I,{value:m.challenge_type,onValueChange:a=>p(t=>({...t,challenge_type:a})),children:[e.jsx(z,{children:e.jsx(T,{})}),e.jsxs(E,{children:[e.jsx(o,{value:"individual",children:"👤 Individuel"}),e.jsx(o,{value:"team",children:"👥 Équipe"}),e.jsx(o,{value:"community",children:"🌍 Communauté"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(f,{variant:"outline",onClick:()=>R(!1),children:"Annuler"}),e.jsxs(f,{onClick:qe,disabled:!m.title.trim()||!m.description.trim(),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Créer le défi"]})]})]})]})}),Xe=({post:a})=>{var t,r,l;return e.jsx(w,{className:"hover:shadow-lg transition-shadow",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs(D,{children:[e.jsx($,{src:a.user.avatar_url}),e.jsx(A,{children:a.user.name[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-semibold",children:a.user.name}),e.jsxs(M,{variant:"outline",className:"text-xs",children:[a.user.sport," • Niveau ",a.user.level]}),e.jsx(M,{variant:"secondary",className:"text-xs",children:a.post_type})]}),a.user_id===(s==null?void 0:s.id)&&e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx(f,{onClick:()=>Be(a.id),variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",children:e.jsx(ts,{className:"h-4 w-4"})})})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:a.content}),a.achievements&&a.achievements.length>0&&e.jsx("div",{className:"mb-3",children:a.achievements.map((d,Ue)=>e.jsxs(M,{className:"mr-2 bg-yellow-100 text-yellow-800",children:["🏆 ",d.description,": ",d.value]},Ue))}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[e.jsx("span",{children:new Date(a.created_at).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>He(a.id),className:`flex items-center space-x-1 hover:text-red-500 transition-colors ${a.is_liked?"text-red-500":""}`,children:[e.jsx(hs,{className:`h-4 w-4 ${a.is_liked?"fill-current":""}`}),e.jsx("span",{children:a.likes_count})]}),e.jsxs("button",{onClick:()=>Ee(U===a.id?null:a.id),className:"flex items-center space-x-1 hover:text-blue-500 transition-colors",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:a.comments_count})]}),e.jsxs("button",{className:"flex items-center space-x-1 hover:text-green-500 transition-colors",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:a.shares_count})]}),e.jsx("button",{onClick:()=>Oe(a.id),className:`hover:text-yellow-500 transition-colors ${a.is_bookmarked?"text-yellow-500":""}`,children:e.jsx(vs,{className:`h-4 w-4 ${a.is_bookmarked?"fill-current":""}`})})]})]}),U===a.id&&e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[(t=a.comments)==null?void 0:t.map(d=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsxs(D,{className:"h-6 w-6",children:[e.jsx($,{src:d.user.avatar_url}),e.jsx(A,{className:"text-xs",children:d.user.name[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg px-3 py-2",children:[e.jsx("p",{className:"text-sm font-medium",children:d.user.name}),e.jsx("p",{className:"text-sm",children:d.content})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(d.created_at).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]},d.id)),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-6 w-6",children:e.jsx(A,{className:"text-xs",children:(((r=s==null?void 0:s.first_name)==null?void 0:r[0])||((l=s==null?void 0:s.username)==null?void 0:l[0])||"U").toUpperCase()})}),e.jsx(C,{value:P,onChange:d=>ae(d.target.value),placeholder:"Ajouter un commentaire...",className:"flex-1",onKeyPress:d=>{d.key==="Enter"&&P.trim()&&le(a.id)}}),e.jsx(f,{onClick:()=>le(a.id),size:"sm",disabled:!P.trim(),children:e.jsx(_e,{className:"h-4 w-4"})})]})]})]})]})})})},Ye=({challenge:a})=>{const t=l=>{switch(l){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-orange-100 text-orange-800";case"expert":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},r=l=>{switch(l){case"workout":return"💪";case"nutrition":return"🍎";case"hydration":return"💧";case"sleep":return"😴";default:return"⭐"}};return e.jsx(w,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:a.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:a.description})]}),e.jsx(M,{className:t(a.difficulty),children:a.difficulty})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[e.jsxs("span",{children:[r(a.pillar)," ",a.pillar]}),e.jsxs("span",{children:["🎯 ",a.target_value," ",a.target_unit]}),e.jsxs("span",{children:["⏱️ ",a.duration_days," jours"]}),e.jsxs("span",{children:["🏆 ",a.reward_points," pts"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progression"}),e.jsxs("span",{children:[a.progress_percentage,"%"]})]}),e.jsx(is,{value:a.progress_percentage,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(D,{className:"h-6 w-6",children:[e.jsx($,{src:a.creator.avatar_url}),e.jsx(A,{className:"text-xs",children:a.creator.name[0]})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["par ",a.creator.name]}),e.jsxs(M,{variant:"outline",className:"text-xs",children:[a.participants_count," participants"]})]}),e.jsx(f,{onClick:()=>Ge(a.id),variant:a.is_participating?"outline":"default",size:"sm",children:a.is_participating?"Quitter":"Rejoindre"})]})]})})},Ze=({friend:a})=>e.jsx(w,{className:"hover:shadow-md transition-shadow",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(D,{children:[e.jsx($,{src:a.avatar_url}),e.jsx(A,{children:a.name[0]})]}),a.is_online&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",a.username]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsxs("span",{children:[a.sport," • Niveau ",a.level]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[a.mutual_friends," amis communs"]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(f,{onClick:()=>Je(a.id),variant:"outline",size:"sm",children:[e.jsx(As,{className:"h-4 w-4 mr-1"}),"Message"]})})]})})});if(Pe)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(oe,{title:"Social",subtitle:"Chargement...",showBackButton:!0,gradient:!0}),e.jsx("div",{className:"p-4 space-y-6 max-w-6xl mx-auto",children:Array.from({length:4}).map((a,t)=>e.jsx(G,{className:"h-32 w-full"},t))})]});const Se=[{id:"feed",label:"Feed",icon:ge},{id:"challenges",label:"Défis",icon:q},{id:"leaderboard",label:"Classement",icon:J},{id:"friends",label:"Amis",icon:H}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(oe,{title:"Social Hub",subtitle:Ke,showBackButton:!0,gradient:!0,rightContent:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(f,{onClick:()=>F(!0),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Post"]}),e.jsxs(f,{onClick:()=>R(!0),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Défi"]})]})}),e.jsxs("div",{className:"p-4 space-y-6 max-w-6xl mx-auto",children:[x&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(w,{className:"text-center",children:e.jsxs(b,{className:"p-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(H,{size:20,className:"text-blue-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:x.friends_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Amis"})]})}),e.jsx(w,{className:"text-center",children:e.jsxs(b,{className:"p-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(q,{size:20,className:"text-green-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:x.active_challenges}),e.jsx("div",{className:"text-sm text-gray-600",children:"Défis Actifs"})]})}),e.jsx(w,{className:"text-center",children:e.jsxs(b,{className:"p-4",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(J,{size:20,className:"text-yellow-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:["#",x.global_rank]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Rang Global"})]})}),e.jsx(w,{className:"text-center",children:e.jsxs(b,{className:"p-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Ms,{size:20,className:"text-purple-600"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:x.total_points.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Points"})]})})]}),e.jsx(w,{children:e.jsx(b,{className:"p-2",children:e.jsxs(ns,{value:u,onValueChange:a=>h(a),className:"space-y-6",children:[e.jsx(rs,{className:"grid w-full grid-cols-4",children:Se.map(a=>{const t=a.icon;return e.jsxs(ls,{value:a.id,className:"flex items-center space-x-2",children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a.label})]},a.id)})}),e.jsxs(V,{value:"feed",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Feed Communauté"}),e.jsxs(I,{value:ee,onValueChange:a=>$e(a),children:[e.jsxs(z,{className:"w-40",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),e.jsx(T,{})]}),e.jsxs(E,{children:[e.jsx(o,{value:"all",children:"Tout"}),e.jsx(o,{value:"friends",children:"Amis"}),e.jsx(o,{value:"sport",children:s==null?void 0:s.sport})]})]})]}),Me?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((a,t)=>e.jsx(G,{className:"h-32 w-full"},t))}):e.jsx("div",{className:"space-y-4",children:j.map(a=>e.jsx(Xe,{post:a},a.id))})]}),e.jsxs(V,{value:"challenges",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Défis Communauté"}),e.jsxs(I,{value:se,onValueChange:a=>Fe(a),children:[e.jsxs(z,{className:"w-40",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),e.jsx(T,{})]}),e.jsxs(E,{children:[e.jsx(o,{value:"all",children:"Tous"}),e.jsx(o,{value:"active",children:"Actifs"}),e.jsx(o,{value:"available",children:"Disponibles"})]})]})]}),Ie?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((a,t)=>e.jsx(G,{className:"h-40 w-full"},t))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(a=>e.jsx(Ye,{challenge:a},a.id))})]}),e.jsx(V,{value:"leaderboard",className:"space-y-6",children:e.jsxs(w,{children:[e.jsx(de,{children:e.jsxs(me,{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsxs("span",{children:["Classement ",s==null?void 0:s.sport]})]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx(gs,{className:"h-8 w-8 mx-auto text-yellow-600 mb-2"}),e.jsx("div",{className:"font-bold",children:"Marie D."}),e.jsx("div",{className:"text-sm text-gray-600",children:"3,450 pts"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(ks,{className:"h-8 w-8 mx-auto text-gray-600 mb-2"}),e.jsx("div",{className:"font-bold",children:"Thomas M."}),e.jsx("div",{className:"text-sm text-gray-600",children:"3,120 pts"})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx(xs,{className:"h-8 w-8 mx-auto text-orange-600 mb-2"}),e.jsx("div",{className:"font-bold",children:"Sophie L."}),e.jsx("div",{className:"text-sm text-gray-600",children:"2,890 pts"})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:x==null?void 0:x.global_rank}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Votre position"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[x==null?void 0:x.total_points," points"]})]})]}),e.jsx(M,{className:"bg-blue-600",children:s==null?void 0:s.sport})]})})]})})]})}),e.jsx(V,{value:"friends",className:"space-y-6",children:e.jsxs(w,{children:[e.jsx(de,{children:e.jsxs(me,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-5 w-5"}),e.jsxs("span",{children:["Mes Amis (",x==null?void 0:x.friends_count,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{value:L,onChange:a=>Re(a.target.value),placeholder:"Rechercher un ami...",className:"w-48"}),e.jsxs(f,{size:"sm",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Inviter"]})]})]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:ce.length>0?ce.map(a=>e.jsx(Ze,{friend:a},a.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(H,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:L?"Aucun ami trouvé":"Connectez-vous avec d'autres athlètes"}),e.jsx("p",{className:"text-sm",children:L?"Essayez un autre terme de recherche":`Trouvez des partenaires d'entraînement ${s==null?void 0:s.sport}`})]})})})]})})]})})}),e.jsx(us,{pillar:"social",showPredictions:!0,showCoaching:!0,showRecommendations:!0})]}),e.jsx(Qe,{}),e.jsx(We,{})]})};export{ma as default};
//# sourceMappingURL=SocialPage-C7t9zpxG.js.map
